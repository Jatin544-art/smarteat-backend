{"version":3,"sources":["../../../../lib/api.js","../../../../app/add-food/page.js"],"sourcesContent":["const API_BASE = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8080/api\";\r\n\r\nexport async function addFood(foodName, quantity) {\r\n  const response = await fetch(\r\n    `${API_BASE}/log?foodName=${encodeURIComponent(foodName)}&quantity=${quantity}`,\r\n    { method: \"POST\" }\r\n  );\r\n  if (!response.ok) throw new Error(\"Failed to add food\");\r\n  return response.json();\r\n}\r\n\r\nexport async function getTodaySummary() {\r\n  const response = await fetch(`${API_BASE}/summary/today`);\r\n  if (!response.ok) throw new Error(\"Failed to fetch today's summary\");\r\n  return response.json();\r\n}\r\n\r\nexport async function getMonthSummary(year, month) {\r\n  const response = await fetch(\r\n    `${API_BASE}/summary/month?year=${year}&month=${month}`\r\n  );\r\n  if (!response.ok) throw new Error(\"Failed to fetch month summary\");\r\n  return response.json();\r\n}\r\n","\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { addFood } from \"@/lib/api\";\r\n\r\nexport default function AddFoodPage() {\r\n  const router = useRouter();\r\n  const [foodName, setFoodName] = useState(\"\");\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [result, setResult] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const user = localStorage.getItem(\"smarteat-user\");\r\n    if (!user) router.push(\"/login\");\r\n  }, [router]);\r\n\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n    if (!foodName || !quantity) {\r\n      setResult(\"Please enter food and quantity.\");\r\n      return;\r\n    }\r\n    try {\r\n      setLoading(true);\r\n      const res = await addFood(foodName, quantity);\r\n      setResult(JSON.stringify(res, null, 2));\r\n      setFoodName(\"\");\r\n      setQuantity(1);\r\n    } catch (e) {\r\n      setResult(\"Error: \" + e.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"grid gap-6 md:grid-cols-2\">\r\n      <div className=\"card p-6\">\r\n        <h1 className=\"text-lg font-semibold\">Log a Food Entry</h1>\r\n        <p className=\"mt-1 text-xs text-slate-500 dark:text-slate-400\">\r\n          Supported examples: egg, chapati, rice, dal (more later).\r\n        </p>\r\n\r\n        <form onSubmit={handleSubmit} className=\"mt-4 space-y-4\">\r\n          <div>\r\n            <label className=\"text-xs font-medium\">Food name</label>\r\n            <input\r\n              className=\"mt-1 w-full rounded-lg border border-slate-200 bg-white/80 px-3 py-2 text-sm outline-none ring-sky-400/40 focus:border-sky-400 focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70\"\r\n              value={foodName}\r\n              onChange={(e) => setFoodName(e.target.value)}\r\n              placeholder=\"e.g. 2 eggs, chapati, rice\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-xs font-medium\">Quantity (units)</label>\r\n            <input\r\n              type=\"number\"\r\n              min=\"0\"\r\n              step=\"0.1\"\r\n              className=\"mt-1 w-full rounded-lg border border-slate-200 bg-white/80 px-3 py-2 text-sm outline-none ring-sky-400/40 focus:border-sky-400 focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70\"\r\n              value={quantity}\r\n              onChange={(e) => setQuantity(e.target.value)}\r\n            />\r\n          </div>\r\n\r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            className=\"w-full rounded-xl bg-emerald-500 py-2 text-sm font-semibold text-white shadow-md shadow-emerald-500/40 transition hover:scale-[1.02] hover:bg-emerald-600 disabled:cursor-not-allowed disabled:opacity-60\"\r\n          >\r\n            {loading ? \"Logging...\" : \"Add Food Entry\"}\r\n          </button>\r\n        </form>\r\n      </div>\r\n\r\n      <div className=\"card p-6\">\r\n        <h2 className=\"text-sm font-semibold\">Last Response</h2>\r\n        <pre className=\"mt-3 max-h-72 overflow-auto rounded-lg bg-slate-900/5 p-3 text-xs text-slate-700 dark:bg-slate-900/70 dark:text-slate-100\">\r\n          {result || \"Your API response will appear here after you log food.\"}\r\n        </pre>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}