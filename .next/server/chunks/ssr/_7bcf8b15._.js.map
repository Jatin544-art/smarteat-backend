{"version":3,"sources":["../../../../lib/api.js","../../../../app/dashboard/page.js"],"sourcesContent":["const API_BASE = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8080/api\";\r\n\r\nexport async function addFood(foodName, quantity) {\r\n  const response = await fetch(\r\n    `${API_BASE}/log?foodName=${encodeURIComponent(foodName)}&quantity=${quantity}`,\r\n    { method: \"POST\" }\r\n  );\r\n  if (!response.ok) throw new Error(\"Failed to add food\");\r\n  return response.json();\r\n}\r\n\r\nexport async function getTodaySummary() {\r\n  const response = await fetch(`${API_BASE}/summary/today`);\r\n  if (!response.ok) throw new Error(\"Failed to fetch today's summary\");\r\n  return response.json();\r\n}\r\n\r\nexport async function getMonthSummary(year, month) {\r\n  const response = await fetch(\r\n    `${API_BASE}/summary/month?year=${year}&month=${month}`\r\n  );\r\n  if (!response.ok) throw new Error(\"Failed to fetch month summary\");\r\n  return response.json();\r\n}\r\n","\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { getTodaySummary } from \"@/lib/api\";\r\n\r\nexport default function DashboardPage() {\r\n  const router = useRouter();\r\n  const [summary, setSummary] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const user = localStorage.getItem(\"smarteat-user\");\r\n    if (!user) {\r\n      router.push(\"/login\");\r\n      return;\r\n    }\r\n\r\n    async function load() {\r\n      try {\r\n        const data = await getTodaySummary();\r\n        setSummary(data);\r\n      } catch (e) {\r\n        console.error(e);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n\r\n    load();\r\n  }, [router]);\r\n\r\n  const cards = [\r\n    {\r\n      title: \"Calories Today\",\r\n      key: \"totalCalories\",\r\n      unit: \"kcal\",\r\n      accent: \"from-orange-400 to-rose-500\",\r\n    },\r\n    {\r\n      title: \"Protein Today\",\r\n      key: \"totalProtein\",\r\n      unit: \"g\",\r\n      accent: \"from-sky-400 to-indigo-500\",\r\n    },\r\n    {\r\n      title: \"Fat Today\",\r\n      key: \"totalFat\",\r\n      unit: \"g\",\r\n      accent: \"from-amber-400 to-emerald-500\",\r\n    },\r\n    {\r\n      title: \"Carbs Today\",\r\n      key: \"totalCarbs\",\r\n      unit: \"g\",\r\n      accent: \"from-fuchsia-400 to-purple-500\",\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold tracking-tight\">\r\n            Your Smart Eat Dashboard\r\n          </h1>\r\n          <p className=\"text-xs text-slate-500 dark:text-slate-400\">\r\n            Quick snapshot of your day&apos;s nutrition and trends.\r\n          </p>\r\n        </div>\r\n        <button\r\n          onClick={() => router.push(\"/add-food\")}\r\n          className=\"mt-2 inline-flex items-center rounded-xl bg-emerald-500 px-4 py-2 text-xs font-semibold text-white shadow-md shadow-emerald-500/40 transition hover:scale-105 hover:bg-emerald-600 sm:mt-0\"\r\n        >\r\n          + Add Food Entry\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"grid gap-4 md:grid-cols-4\">\r\n        {cards.map((card) => (\r\n          <div key={card.key} className=\"card relative overflow-hidden p-4\">\r\n            <div\r\n              className={`pointer-events-none absolute -right-8 -top-8 h-20 w-20 rounded-full bg-gradient-to-br opacity-40 ${card.accent}`}\r\n            />\r\n            <p className=\"text-xs font-medium text-slate-500 dark:text-slate-400\">\r\n              {card.title}\r\n            </p>\r\n            <p className=\"mt-3 text-2xl font-bold\">\r\n              {loading\r\n                ? \"...\"\r\n                : summary\r\n                ? `${Math.round(summary[card.key] || 0)} ${card.unit}`\r\n                : `0 ${card.unit}`}\r\n            </p>\r\n            <p className=\"mt-1 text-[10px] text-slate-500 dark:text-slate-400\">\r\n              Based on all entries logged for today.\r\n            </p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"grid gap-4 md:grid-cols-3\">\r\n        <div className=\"card col-span-2 p-5\">\r\n          <h2 className=\"text-sm font-semibold\">Today&apos;s Overview</h2>\r\n          <p className=\"mt-1 text-xs text-slate-500 dark:text-slate-400\">\r\n            Date:{\" \"}\r\n            {summary?.date ? summary.date : new Date().toISOString().slice(0, 10)}\r\n          </p>\r\n          <pre className=\"mt-3 max-h-40 overflow-auto rounded-lg bg-slate-900/5 p-3 text-xs text-slate-700 dark:bg-slate-900/70 dark:text-slate-100\">\r\n            {loading\r\n              ? \"Loading...\"\r\n              : summary\r\n              ? JSON.stringify(summary, null, 2)\r\n              : \"No data yet. Try adding some food entries.\"}\r\n          </pre>\r\n        </div>\r\n\r\n        <div className=\"card p-5\">\r\n          <h2 className=\"text-sm font-semibold\">Smart Suggestion</h2>\r\n          <p className=\"mt-2 text-xs text-slate-600 dark:text-slate-300\">\r\n            {summary?.suggestion ||\r\n              \"Log your meals to get personalized suggestions here.\"}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}